#!/bin/bash

# ============================================
# FG-CLIP è®­ç»ƒå¿«é€Ÿå¯åŠ¨å¡ç‰‡
# ============================================

cat << 'EOF'

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸš€ FG-CLIP VAD è®­ç»ƒå¿«é€Ÿå¯åŠ¨                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ é¡¹ç›®çŠ¶æ€:
  âœ… æ‰€æœ‰ç»„ä»¶å·²ä¿®å¤
  âœ… æ•°æ®æ ¼å¼å·²é€‚é…
  âœ… æœ¬åœ°CLIPåŠ è½½å™¨å·²å°±ç»ª
  âœ… éªŒè¯æµ‹è¯•å…¨éƒ¨é€šè¿‡

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ æ–¹å¼1: ä¸€é”®å¯åŠ¨ï¼ˆæ¨èæ–°æ‰‹ï¼‰

  cd /data/zyy/wsvad/2026CVPR/FG-CLIP
  bash scripts/start_training.sh

  â†’ è‡ªåŠ¨éªŒè¯ â†’ è‡ªåŠ¨æ¸…ç† â†’ å¯åŠ¨è®­ç»ƒ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš€ æ–¹å¼2: å¿«é€Ÿå¯åŠ¨ï¼ˆç†Ÿæ‚‰æµç¨‹åï¼‰

  # Step 1: è¿›å…¥é¡¹ç›®ç›®å½•
  cd /data/zyy/wsvad/2026CVPR/FG-CLIP

  # Step 2: éªŒè¯ç»„ä»¶ï¼ˆå¯é€‰ï¼Œé¦–æ¬¡è¿è¡Œæ¨èï¼‰
  python3 scripts/verify_training_ready.py

  # Step 3: å¯åŠ¨è°ƒè¯•è®­ç»ƒï¼ˆ10è§†é¢‘ï¼Œ~15åˆ†é’Ÿï¼‰
  bash scripts/train_ucf_debug.sh

  # Step 4: ç›‘æ§è®­ç»ƒï¼ˆæ–°ç»ˆç«¯ï¼‰
  tail -f checkpoints/fgclip_ucf_debug/trainer_log.txt

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’ª æ–¹å¼3: æ­£å¼è®­ç»ƒï¼ˆ232è§†é¢‘ï¼Œ~4-8å°æ—¶ï¼‰

  # Step 1: åˆ›å»ºæ­£å¼è®­ç»ƒè„šæœ¬
  cd /data/zyy/wsvad/2026CVPR/FG-CLIP
  cp scripts/train_ucf_debug.sh scripts/train_ucf_full.sh

  # Step 2: ä¿®æ”¹é…ç½®
  vim scripts/train_ucf_full.sh
  
  ä¿®æ”¹ä»¥ä¸‹é…ç½®:
    DATA_PATH="...ucf_fgclip_train_final.json"  (232è§†é¢‘)
    OUTPUT_DIR="./checkpoints/fgclip_ucf_full"
    --num_frames 256                              (å®Œæ•´æ—¶åº)
    --num_train_epochs 10                         (æ›´å¤šè®­ç»ƒ)
    --save_steps 100                              (å‡å°‘ä¿å­˜)

  # Step 3: å¯åŠ¨è®­ç»ƒ
  bash scripts/train_ucf_full.sh

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š ç›‘æ§è®­ç»ƒï¼ˆä¸‰é€‰ä¸€ï¼‰

  1. å®æ—¶æ—¥å¿—:
     tail -f checkpoints/fgclip_ucf_debug/trainer_log.txt

  2. TensorBoardå¯è§†åŒ–:
     tensorboard --logdir checkpoints/fgclip_ucf_debug --port 6006
     # æµè§ˆå™¨æ‰“å¼€: http://localhost:6006

  3. å¿«é€Ÿæ£€æŸ¥Loss:
     grep "loss" checkpoints/fgclip_ucf_debug/trainer_log.txt | tail -20

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ˆ é¢„æœŸLosså˜åŒ–

  è°ƒè¯•è®­ç»ƒï¼ˆ10è§†é¢‘ï¼‰:
    Step 1:   loss = 8.5  (åˆå§‹éšæœº)
    Step 5:   loss = 5.1  (å¼€å§‹å­¦ä¹ )
    Step 10:  loss = 2.8  (æ”¶æ•›)

  æ­£å¼è®­ç»ƒï¼ˆ232è§†é¢‘ï¼‰:
    Epoch 1:  loss = 8.0 â†’ 2.5
    Epoch 5:  loss = 1.5 â†’ 1.2
    Epoch 10: loss â‰ˆ 1.0  (å……åˆ†æ”¶æ•›)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš ï¸  å¸¸è§é—®é¢˜å¿«é€Ÿä¿®å¤

  é—®é¢˜1: OOM (æ˜¾å­˜ä¸è¶³)
    â†’ å‡å°‘å¸§æ•°: --num_frames 32
    â†’ å‡å°batch: --per_device_train_batch_size 1

  é—®é¢˜2: Loss = NaN
    â†’ é™ä½å­¦ä¹ ç‡: --learning_rate 5e-6
    â†’ å¯ç”¨è£å‰ª: --max_grad_norm 1.0

  é—®é¢˜3: è®­ç»ƒå¤ªæ…¢
    â†’ å¢åŠ workers: --dataloader_num_workers 8
    â†’ æ£€æŸ¥GPUåˆ©ç”¨ç‡: nvidia-smi

  é—®é¢˜4: FileNotFoundError
    â†’ é‡æ–°éªŒè¯: python3 scripts/verify_training_ready.py

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š è¯¦ç»†æ–‡æ¡£

  å®Œæ•´æŒ‡å—: COMPLETE_TRAINING_GUIDE.md
  ä¿®å¤æŠ¥å‘Š: FIXES_COMPLETED.md
  å¿«é€Ÿå¼€å§‹: README_FIXES.md
  å®¡æŸ¥æŠ¥å‘Š: PRE_TRAINING_AUDIT.md

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… è®­ç»ƒæˆåŠŸçš„æ ‡å¿—:

  âœ“ Lossç¨³å®šä¸‹é™
  âœ“ æ²¡æœ‰NaNæˆ–Inf
  âœ“ GPUåˆ©ç”¨ç‡ > 80%
  âœ“ Checkpointæ­£å¸¸ä¿å­˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‰ å‡†å¤‡å°±ç»ªï¼ç°åœ¨å°±å¯ä»¥å¼€å§‹è®­ç»ƒäº†ï¼

  æ¨èå‘½ä»¤ï¼ˆå¤åˆ¶ç²˜è´´å³å¯è¿è¡Œï¼‰:
  
    cd /data/zyy/wsvad/2026CVPR/FG-CLIP && bash scripts/start_training.sh

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

EOF
