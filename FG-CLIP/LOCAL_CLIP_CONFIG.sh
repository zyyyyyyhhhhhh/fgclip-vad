#!/bin/bash

# ============================================
# FG-CLIP æœ¬åœ°è®­ç»ƒé…ç½®è¯´æ˜
# ============================================

cat << 'EOF'

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           ğŸ”’ æœ¬åœ°CLIPé…ç½® - æ— éœ€è”ç½‘è®­ç»ƒ                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… æœ¬åœ°CLIPæ¨¡å‹æƒé‡å·²å°±ç»ª

æ£€æµ‹åˆ°ä»¥ä¸‹æœ¬åœ°ç¼“å­˜æ¨¡å‹:
  ğŸ“ ~/.cache/clip/
  â”œâ”€â”€ ViT-B-32.pt           (338MB) âœ“ æœ¬æ¬¡è®­ç»ƒä½¿ç”¨
  â”œâ”€â”€ ViT-B-16.pt           (335MB) âœ“ å¯é€‰æ›´é«˜ç²¾åº¦
  â”œâ”€â”€ ViT-L-14-336px.pt     (891MB) âœ“ å¯é€‰æœ€é«˜ç²¾åº¦
  â””â”€â”€ vit_b_16_plus_240...  (472KB)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ é…ç½®è¯´æ˜

1. BASE_MODEL å‚æ•°:
   - å½“å‰ä½¿ç”¨: "ViT-B/32"
   - æœ¬åœ°åŠ è½½: ä» ~/.cache/clip/ViT-B-32.pt åŠ è½½
   - æ— éœ€å‰ç¼€: ä¸éœ€è¦ "openai/" æˆ– "huggingface/" å‰ç¼€
   
2. æ¨¡å‹é€‰æ‹©å¯¹æ¯”:

   Model           ç²¾åº¦    é€Ÿåº¦    æ˜¾å­˜    æ¨èåœºæ™¯
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   ViT-B/32        â˜…â˜…â˜†    â˜…â˜…â˜…    â˜…â˜…â˜…    å¿«é€Ÿå®éªŒ/è°ƒè¯•
   ViT-B/16        â˜…â˜…â˜…    â˜…â˜…â˜†    â˜…â˜…â˜†    å¹³è¡¡æ€§èƒ½
   ViT-L/14@336px  â˜…â˜…â˜…â˜…   â˜…â˜†â˜†    â˜…â˜†â˜†    æœ€é«˜ç²¾åº¦

3. åŠ è½½æµç¨‹:
   
   a) train_fgclip.py ä¸­çš„ LocalCLIPWrapper ä¼š:
      - é¦–å…ˆå°è¯•ä»æœ¬åœ° fgclip/model/clip/ åŠ è½½ä»£ç 
      - ç„¶åä» ~/.cache/clip/ åŠ è½½æƒé‡
      - å®Œå…¨ä¸è®¿é—®ç½‘ç»œ
   
   b) å¦‚æœæœ¬åœ°åŠ è½½å¤±è´¥:
      - ä¼šå›é€€åˆ° HuggingFace åŠ è½½ï¼ˆéœ€è¦ç½‘ç»œï¼‰
      - ä½†ç”±äºä½ æœ‰æœ¬åœ°æƒé‡ï¼Œä¸ä¼šè§¦å‘å›é€€

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ æ¨èé…ç½®ï¼ˆå·²åœ¨ train_ucf_full.sh ä¸­è®¾ç½®ï¼‰

# ä½¿ç”¨æœ¬åœ° ViT-B/32ï¼ˆæœ€å¿«ï¼Œé€‚åˆé¦–æ¬¡è®­ç»ƒï¼‰
BASE_MODEL="ViT-B/32"

# å¦‚éœ€æ›´é«˜ç²¾åº¦ï¼Œå¯æ”¹ä¸º:
# BASE_MODEL="ViT-B/16"        # æ¨èï¼šæ›´é«˜ç²¾åº¦ï¼Œé€Ÿåº¦é€‚ä¸­
# BASE_MODEL="ViT-L/14@336px"  # æœ€é«˜ç²¾åº¦ï¼Œä½†æ…¢2-3å€

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš ï¸  æ³¨æ„äº‹é¡¹

1. æ¨¡å‹æƒé‡ä½ç½®:
   - ç³»ç»Ÿé»˜è®¤: ~/.cache/clip/
   - å¦‚éœ€è‡ªå®šä¹‰: ä¿®æ”¹ clip.py ä¸­çš„ download_root å‚æ•°

2. ç½‘ç»œæ£€æŸ¥:
   è®­ç»ƒå¼€å§‹æ—¶ä¼šæ˜¾ç¤º:
   âœ“ Tokenizer loaded (local CLIP)      â† æœ¬åœ°æˆåŠŸ
   âœ“ Image processor loaded (local CLIP) â† æœ¬åœ°æˆåŠŸ
   
   å¦‚æœçœ‹åˆ°:
   âœ— Local CLIP loading failed           â† éœ€è¦æ£€æŸ¥è·¯å¾„
   â†’ Falling back to HuggingFace         â† ä¼šå°è¯•è”ç½‘

3. éªŒè¯æœ¬åœ°åŠ è½½:
   python3 -c "
   from fgclip.train.local_clip_loader import LocalCLIPWrapper
   tokenizer = LocalCLIPWrapper.get_tokenizer()
   print('âœ“ æœ¬åœ°CLIPåŠ è½½æˆåŠŸ')
   "

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš€ ç«‹å³å¼€å§‹è®­ç»ƒï¼ˆå®Œå…¨ç¦»çº¿ï¼‰

cd /data/zyy/wsvad/2026CVPR/FG-CLIP
bash scripts/train_ucf_full.sh

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

EOF
